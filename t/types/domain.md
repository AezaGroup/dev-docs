# Управление доменами
> Благодаря нашему API Вы можете автоматизировать Ваши процессы, связанные с DNS и доменами.

При регистрации домена в API нужно передать следующие параметры строго следуя шаблону:
| Поле | Описание | Варианты | Формат |
|------------------------------------------------------|--------------------------------| --- | --- |
| phone | номер телефона без сторонних символов | string | 79001112233 |
| birthdate | дата рождения в unixtime | number |  |
| passport | паспортные данные (серия номер, кем выдан, дата выдачи) | string | 81 18 800800, выдан АБВГД, 01.01.2000 |
| fio | фамилия имя отчество | string | Иванов Иван Иванович |
| country | Код страны | string | RU, UA, US |
| city | Город с префиксом | string | г. Москва |
| address | Адрес | string | ул. Бутлерова 7, кв 404 |
| region | Регион или область | string | Республика Хакасия |
| index | Почтовый индекс | string | 650010 |

Имя домена передается как имя услуги, обязательно указывать соответствующий тариф при заказе услуги.

## Смена NS серверов
* ```PUT /services/:ID { "ns": ["ns1.example.com", "ns2.example.com"] }``` - установить конкретные NS
* ```PUT /services/:ID { "ns": [] }``` - установить стандартные NS (ns1.aezadns.com, ns2.aezadns.com)

## Управление DNS записями
```PUT /services/:ID { "records": [...] } ```

где ... - сериализованные записи в формате "TYPE|NAME|TTL|CONTENT"
| Поле | Описание |
|------------------------------------------------------|--------------------------------|
| TYPE | Тип записи (A, TXT, CNAME, полный список: ```GET /domains/records```) |
| NAME | Имя записи (поддомен или @ для указания на основной домен) |
| TTL | Время кэширования в секундах (мин: 300) |
| CONTENT | содержимое записи. Экранируется как URL |

*Пример:*

Данные:
| Тип | Имя | TTL | Значение |
|-----|-----|-----|----------|
| A   | @   | 300 | 1.1.1.1  |
| TXT | hello | 3600 | world |
| TXT | why | 1337 | 	i love api !@#$%^&*() |

Запрос:
```
// Замените :ID на id Вашего домена в биллинге
this.api.query('PUT', 'services/:ID', {
  records: [
    'A|@|300|1.1.1.1',
    'TXT|hello|3600|world',
    'TXT|why|1337|i%20love%20api%20!%40%23%24%25%5E%26*()'
  ]
});
```

Записи в рамках наших dns можно легко проверить командой (в терминале):
* windows - ```nslookup -type=any ВАШ_ДОМЕН ns1.aezadns.com```
* linux - ```dig @ns1.aezadns.com ВАШ_ДОМЕН any```
